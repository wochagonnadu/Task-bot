# Task Bot

Система управления задачами с двумя Telegram-ботами: для администраторов и пользователей.

## Возможности

### Админский бот (Admin Bot)
- Создание и управление задачами
- Назначение исполнителей
- Просмотр всех задач
- Управление проектами и клиентами
- Экспорт отчетов
- Аналитика

### Пользовательский бот (User Bot)
- Просмотр назначенных задач
- Управление статусом задач
- Учет времени работы
- Получение уведомлений

## Требования

- Python 3.9+
- Docker и Docker Compose

## Установка и запуск

### 1. С использованием Docker (рекомендуемый способ)

Этот способ автоматически запустит базу данных PostgreSQL и приложение.

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/yourusername/task-bot.git
    cd task-bot
    ```

2.  **Создайте файл `.env`** в корне проекта и добавьте в него токены ваших ботов:
    ```env
    # Токены ботов
    TELEGRAM_BOT_TOKEN=your_admin_bot_token
    USER_TELEGRAM_BOT_TOKEN=your_user_bot_token
    ```

3.  **Запустите контейнеры:**
    ```bash
    docker-compose up -d
    ```

    При первом запуске Docker автоматически применит все миграции базы данных.

### 2. Ручная установка

1.  **Клонируйте репозиторий** и перейдите в директорию проекта.

2.  **Создайте виртуальное окружение** и установите зависимости:
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/macOS
    # или
    venv\Scripts\activate  # Для Windows
    pip install -r requirements.txt
    ```

3.  **Создайте файл `.env`** с настройками, как описано выше, и добавьте URL для подключения к базе данных:
    ```env
    DATABASE_URL=postgresql+asyncpg://user:password@host:port/dbname?ssl=disable
    ```

4.  **Примените миграции базы данных:**
    ```bash
    alembic upgrade head
    ```

5.  **Запустите приложение:**
    ```bash
    python src/main.py
    ```

## Использование

После запуска ботов взаимодействие с ними происходит через команды `/start`, `/help` и интерфейс с кнопками. Старые текстовые команды были заменены на интерактивные меню.

## Лицензия

Проект пока не имеет лицензии. Рекомендуется добавить файл `LICENSE` с текстом одной из стандартных лицензий, например, [MIT License](https://opensource.org/licenses/MIT).

## Структура проекта

```
task-bot/
├───.gitignore
├───alembic.ini            # Конфигурация Alembic для миграций
├───amvera.yml
├───create_schema.py
├───Dockerfile
├───docker-compose.yml     # Конфигурация Docker Compose
├───entrypoint.sh
├───README.md
├───requirements.txt
├───wait-for-db.sh
├───data/                  # Директория для данных (игнорируется git)
├───src/
│   ├───main.py            # Основная точка входа
│   ├───user_bot.py        # Логика пользовательского бота
│   ├───admin_bot.py       # Логика админского бота
│   ├───config.py          # Конфигурация
│   ├───database/          # Модели и миграции БД
│   ├───handlers/          # Обработчики команд и колбэков
│   └───...                # и другие директории
└───...
```
